{"ast":null,"code":"var _jsxFileName = \"/home/cristian/Documentos/7mo/lenguajes_programacion/Videoconferencia-app/client/src/components/PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as pdfjsLib from 'pdfjs-dist';\n// Worker setup for pdfjs-dist\n// Using CDN to ensure correct version and headers. Use .mjs for module support in v5+\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\npdfjsLib.GlobalWorkerOptions.workerSrc = `https://unpkg.com/pdfjs-dist@${pdfjsLib.version}/build/pdf.worker.mjs`;\n\n// Polyfill for Promise.withResolvers (required for pdfjs-dist v5+)\nif (typeof Promise.withResolvers === 'undefined') {\n  Promise.withResolvers = function () {\n    let resolve, reject;\n    const promise = new Promise((res, rej) => {\n      resolve = res;\n      reject = rej;\n    });\n    return {\n      promise,\n      resolve,\n      reject\n    };\n  };\n}\nconst PdfViewer = ({\n  fileUrl,\n  pageNumber,\n  scale = 1.0,\n  onPageLoadSuccess,\n  onPageLoadError,\n  whiteboardLines = [],\n  // Default to empty array\n  onDraw,\n  canDraw,\n  containerWidth\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const whiteboardRef = useRef(null);\n  const [renderTask, setRenderTask] = useState(null);\n  const [drawing, setDrawing] = useState(false);\n  const [lastPos, setLastPos] = useState(null);\n  const [viewport, setViewport] = useState(null);\n  const [pageError, setPageError] = useState(null);\n\n  // Load and render PDF page\n  useEffect(() => {\n    let active = true;\n    const renderPage = async () => {\n      if (!fileUrl) return;\n      try {\n        // Clear error\n        setPageError(null);\n        const loadingTask = pdfjsLib.getDocument(fileUrl);\n        // Wait for PDF to load info\n        const pdf = await loadingTask.promise;\n        if (!active) return;\n        console.log(`PdfViewer: Loaded. Pages: ${pdf.numPages}, Requesting: ${pageNumber}`);\n\n        // Validation\n        const safePageNum = Math.min(Math.max(1, parseInt(pageNumber) || 1), pdf.numPages);\n        const page = await pdf.getPage(safePageNum);\n        if (!active) return;\n\n        // Calculate scale to fit container width\n        const originalViewport = page.getViewport({\n          scale: 1\n        });\n        const desiredScale = containerWidth ? containerWidth / originalViewport.width : 1;\n        const newViewport = page.getViewport({\n          scale: desiredScale\n        });\n        setViewport(newViewport);\n        const canvas = canvasRef.current;\n        const context = canvas.getContext('2d');\n        canvas.height = newViewport.height;\n        canvas.width = newViewport.width;\n\n        // Resize whiteboard canvas to match\n        if (whiteboardRef.current) {\n          whiteboardRef.current.height = newViewport.height;\n          whiteboardRef.current.width = newViewport.width;\n        }\n        const renderContext = {\n          canvasContext: context,\n          viewport: newViewport\n        };\n        if (renderTask) {\n          await renderTask.promise; // Wait for previous render to cancel or finish ? \n          // Actually pdfjs cancels automatically if you call cancel()\n          // but here we just store the task.\n        }\n        const task = page.render(renderContext);\n        setRenderTask(task);\n        await task.promise;\n        if (onPageLoadSuccess) onPageLoadSuccess(pdf);\n      } catch (error) {\n        if (!active) return;\n        console.error(\"Error rendering PDF page:\", error);\n        setPageError(error.message || \"Error cargando PDF\");\n        if (onPageLoadError) onPageLoadError(error);\n      }\n    };\n    renderPage();\n    return () => {\n      active = false;\n      if (renderTask) {\n        renderTask.cancel();\n      }\n    };\n  }, [fileUrl, pageNumber, containerWidth, scale]);\n\n  // Render Whiteboard Lines\n  useEffect(() => {\n    if (!whiteboardRef.current || !viewport) return;\n    const canvas = whiteboardRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear before redraw\n\n    // Draw all lines\n    whiteboardLines.forEach(line => {\n      if (line.points.length < 2) return;\n      ctx.beginPath();\n      ctx.strokeStyle = line.color;\n      ctx.lineWidth = line.width; // We might need to scale width relative to viewport\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n\n      // Start\n      // Points are stored ideally as normalized [0-1] coordinates relative to PDF size\n      // But implementation simplicity: stored as raw relative to some standard, OR we normalize now.\n      // Let's assume points are normalized [x, y, x, y...] (0-1) to handle resizing responsiveness\n\n      // If we store raw pixels, resizing breaks it.\n      // PROPOSAL: Store normalized coordinates [0-1].\n\n      const w = canvas.width;\n      const h = canvas.height;\n      ctx.moveTo(line.points[0] * w, line.points[1] * h);\n      for (let i = 2; i < line.points.length; i += 2) {\n        ctx.lineTo(line.points[i] * w, line.points[i + 1] * h);\n      }\n      ctx.stroke();\n    });\n  }, [whiteboardLines, viewport]);\n\n  // Drawing Handlers\n  const getCoords = e => {\n    const canvas = whiteboardRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = (e.clientX || e.touches[0].clientX) - rect.left;\n    const y = (e.clientY || e.touches[0].clientY) - rect.top;\n\n    // Normalize relative to visual size (rect)\n    return {\n      x: x / rect.width,\n      y: y / rect.height\n    };\n  };\n  const startDrawing = e => {\n    if (!canDraw) return;\n    setDrawing(true);\n    const {\n      x,\n      y\n    } = getCoords(e);\n    setLastPos({\n      x,\n      y\n    });\n  };\n  const draw = e => {\n    if (!drawing || !canDraw || !lastPos) return;\n    e.preventDefault(); // Prevent scroll on touch\n\n    const currentPos = getCoords(e);\n\n    // Emit single segment or build a line? \n    // Emitting segments (line from A to B) is better for real-time.\n    // BUT we need to associate them to a single \"stroke\" if we want undo later.\n    // For now, simpler: Emit 'stroke-segment' or just update local state and emit full line on mouseUp?\n    // Real-time collaboration needssegments.\n\n    // Strategy: We draw locally immediately. We verify 'line' in backend is full array.\n    // Let's emit the WHOLE line? No, too big.\n    // Let's emit a segment. 'whiteboard-draw' event will take a full line object?\n    // Actually simpler for MVP: Emit the single small line segment as a \"Line\" object.\n\n    const newLine = {\n      points: [lastPos.x, lastPos.y, currentPos.x, currentPos.y],\n      color: '#ff0000',\n      // Default red\n      width: 3,\n      tool: 'pen'\n    };\n    if (onDraw) onDraw(newLine);\n    setLastPos(currentPos);\n  };\n  const stopDrawing = () => {\n    setDrawing(false);\n    setLastPos(null);\n  };\n  if (pageError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'white',\n        background: '#dc2626',\n        padding: '20px',\n        borderRadius: '8px',\n        textAlign: 'center',\n        margin: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Error visualizando PDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: pageError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"code\", {\n        style: {\n          fontSize: '0.8rem',\n          background: 'rgba(0,0,0,0.2)',\n          padding: '4px'\n        },\n        children: fileUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'relative',\n      width: '100%',\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'block',\n        width: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: whiteboardRef,\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        cursor: canDraw ? 'crosshair' : 'default',\n        touchAction: 'none'\n      },\n      onMouseDown: startDrawing,\n      onMouseMove: draw,\n      onMouseUp: stopDrawing,\n      onMouseLeave: stopDrawing,\n      onTouchStart: startDrawing,\n      onTouchMove: draw,\n      onTouchEnd: stopDrawing\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 9\n  }, this);\n};\n_s(PdfViewer, \"kS5mRN5CuuOqDIBdKhq92ET4eJI=\");\n_c = PdfViewer;\nexport default PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","pdfjsLib","jsxDEV","_jsxDEV","GlobalWorkerOptions","workerSrc","version","Promise","withResolvers","resolve","reject","promise","res","rej","PdfViewer","fileUrl","pageNumber","scale","onPageLoadSuccess","onPageLoadError","whiteboardLines","onDraw","canDraw","containerWidth","_s","canvasRef","whiteboardRef","renderTask","setRenderTask","drawing","setDrawing","lastPos","setLastPos","viewport","setViewport","pageError","setPageError","active","renderPage","loadingTask","getDocument","pdf","console","log","numPages","safePageNum","Math","min","max","parseInt","page","getPage","originalViewport","getViewport","desiredScale","width","newViewport","canvas","current","context","getContext","height","renderContext","canvasContext","task","render","error","message","cancel","ctx","clearRect","forEach","line","points","length","beginPath","strokeStyle","color","lineWidth","lineCap","lineJoin","w","h","moveTo","i","lineTo","stroke","getCoords","e","rect","getBoundingClientRect","x","clientX","touches","left","y","clientY","top","startDrawing","draw","preventDefault","currentPos","newLine","tool","stopDrawing","style","background","padding","borderRadius","textAlign","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","position","ref","display","cursor","touchAction","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","_c","$RefreshReg$"],"sources":["/home/cristian/Documentos/7mo/lenguajes_programacion/Videoconferencia-app/client/src/components/PdfViewer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport * as pdfjsLib from 'pdfjs-dist';\n// Worker setup for pdfjs-dist\n// Using CDN to ensure correct version and headers. Use .mjs for module support in v5+\npdfjsLib.GlobalWorkerOptions.workerSrc = `https://unpkg.com/pdfjs-dist@${pdfjsLib.version}/build/pdf.worker.mjs`;\n\n// Polyfill for Promise.withResolvers (required for pdfjs-dist v5+)\nif (typeof Promise.withResolvers === 'undefined') {\n    Promise.withResolvers = function () {\n        let resolve, reject;\n        const promise = new Promise((res, rej) => {\n            resolve = res;\n            reject = rej;\n        });\n        return { promise, resolve, reject };\n    };\n}\n\nconst PdfViewer = ({\n    fileUrl,\n    pageNumber,\n    scale = 1.0,\n    onPageLoadSuccess,\n    onPageLoadError,\n    whiteboardLines = [], // Default to empty array\n    onDraw,\n    canDraw,\n    containerWidth\n}) => {\n    const canvasRef = useRef(null);\n    const whiteboardRef = useRef(null);\n    const [renderTask, setRenderTask] = useState(null);\n    const [drawing, setDrawing] = useState(false);\n    const [lastPos, setLastPos] = useState(null);\n    const [viewport, setViewport] = useState(null);\n    const [pageError, setPageError] = useState(null);\n\n    // Load and render PDF page\n    useEffect(() => {\n        let active = true;\n\n        const renderPage = async () => {\n            if (!fileUrl) return;\n\n            try {\n                // Clear error\n                setPageError(null);\n\n                const loadingTask = pdfjsLib.getDocument(fileUrl);\n                // Wait for PDF to load info\n                const pdf = await loadingTask.promise;\n\n                if (!active) return;\n\n                console.log(`PdfViewer: Loaded. Pages: ${pdf.numPages}, Requesting: ${pageNumber}`);\n\n                // Validation\n                const safePageNum = Math.min(Math.max(1, parseInt(pageNumber) || 1), pdf.numPages);\n\n                const page = await pdf.getPage(safePageNum);\n\n                if (!active) return;\n\n                // Calculate scale to fit container width\n                const originalViewport = page.getViewport({ scale: 1 });\n                const desiredScale = containerWidth ? (containerWidth / originalViewport.width) : 1;\n                const newViewport = page.getViewport({ scale: desiredScale });\n                setViewport(newViewport);\n\n                const canvas = canvasRef.current;\n                const context = canvas.getContext('2d');\n                canvas.height = newViewport.height;\n                canvas.width = newViewport.width;\n\n                // Resize whiteboard canvas to match\n                if (whiteboardRef.current) {\n                    whiteboardRef.current.height = newViewport.height;\n                    whiteboardRef.current.width = newViewport.width;\n                }\n\n                const renderContext = {\n                    canvasContext: context,\n                    viewport: newViewport,\n                };\n\n                if (renderTask) {\n                    await renderTask.promise; // Wait for previous render to cancel or finish ? \n                    // Actually pdfjs cancels automatically if you call cancel()\n                    // but here we just store the task.\n                }\n\n                const task = page.render(renderContext);\n                setRenderTask(task);\n\n                await task.promise;\n\n                if (onPageLoadSuccess) onPageLoadSuccess(pdf);\n\n            } catch (error) {\n                if (!active) return;\n                console.error(\"Error rendering PDF page:\", error);\n                setPageError(error.message || \"Error cargando PDF\");\n                if (onPageLoadError) onPageLoadError(error);\n            }\n        };\n\n        renderPage();\n\n        return () => {\n            active = false;\n            if (renderTask) {\n                renderTask.cancel();\n            }\n        };\n    }, [fileUrl, pageNumber, containerWidth, scale]);\n\n    // Render Whiteboard Lines\n    useEffect(() => {\n        if (!whiteboardRef.current || !viewport) return;\n\n        const canvas = whiteboardRef.current;\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear before redraw\n\n        // Draw all lines\n        whiteboardLines.forEach(line => {\n            if (line.points.length < 2) return;\n\n            ctx.beginPath();\n            ctx.strokeStyle = line.color;\n            ctx.lineWidth = line.width; // We might need to scale width relative to viewport\n            ctx.lineCap = 'round';\n            ctx.lineJoin = 'round';\n\n            // Start\n            // Points are stored ideally as normalized [0-1] coordinates relative to PDF size\n            // But implementation simplicity: stored as raw relative to some standard, OR we normalize now.\n            // Let's assume points are normalized [x, y, x, y...] (0-1) to handle resizing responsiveness\n\n            // If we store raw pixels, resizing breaks it.\n            // PROPOSAL: Store normalized coordinates [0-1].\n\n            const w = canvas.width;\n            const h = canvas.height;\n\n            ctx.moveTo(line.points[0] * w, line.points[1] * h);\n\n            for (let i = 2; i < line.points.length; i += 2) {\n                ctx.lineTo(line.points[i] * w, line.points[i + 1] * h);\n            }\n            ctx.stroke();\n        });\n\n    }, [whiteboardLines, viewport]);\n\n\n    // Drawing Handlers\n    const getCoords = (e) => {\n        const canvas = whiteboardRef.current;\n        const rect = canvas.getBoundingClientRect();\n        const x = (e.clientX || e.touches[0].clientX) - rect.left;\n        const y = (e.clientY || e.touches[0].clientY) - rect.top;\n\n        // Normalize relative to visual size (rect)\n        return {\n            x: x / rect.width,\n            y: y / rect.height\n        };\n    }\n\n    const startDrawing = (e) => {\n        if (!canDraw) return;\n        setDrawing(true);\n        const { x, y } = getCoords(e);\n        setLastPos({ x, y });\n    };\n\n    const draw = (e) => {\n        if (!drawing || !canDraw || !lastPos) return;\n        e.preventDefault(); // Prevent scroll on touch\n\n        const currentPos = getCoords(e);\n\n        // Emit single segment or build a line? \n        // Emitting segments (line from A to B) is better for real-time.\n        // BUT we need to associate them to a single \"stroke\" if we want undo later.\n        // For now, simpler: Emit 'stroke-segment' or just update local state and emit full line on mouseUp?\n        // Real-time collaboration needssegments.\n\n        // Strategy: We draw locally immediately. We verify 'line' in backend is full array.\n        // Let's emit the WHOLE line? No, too big.\n        // Let's emit a segment. 'whiteboard-draw' event will take a full line object?\n        // Actually simpler for MVP: Emit the single small line segment as a \"Line\" object.\n\n        const newLine = {\n            points: [lastPos.x, lastPos.y, currentPos.x, currentPos.y],\n            color: '#ff0000', // Default red\n            width: 3,\n            tool: 'pen'\n        };\n\n        if (onDraw) onDraw(newLine);\n\n        setLastPos(currentPos);\n    };\n\n    const stopDrawing = () => {\n        setDrawing(false);\n        setLastPos(null);\n    };\n\n    if (pageError) {\n        return (\n            <div style={{\n                color: 'white',\n                background: '#dc2626',\n                padding: '20px',\n                borderRadius: '8px',\n                textAlign: 'center',\n                margin: '20px'\n            }}>\n                <h3>Error visualizando PDF</h3>\n                <p>{pageError}</p>\n                <code style={{ fontSize: '0.8rem', background: 'rgba(0,0,0,0.2)', padding: '4px' }}>{fileUrl}</code>\n            </div>\n        );\n    }\n\n    return (\n        <div style={{ position: 'relative', width: '100%', height: '100%' }}>\n            <canvas\n                ref={canvasRef}\n                style={{ display: 'block', width: '100%' }}\n            />\n            <canvas\n                ref={whiteboardRef}\n                style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    cursor: canDraw ? 'crosshair' : 'default',\n                    touchAction: 'none'\n                }}\n                onMouseDown={startDrawing}\n                onMouseMove={draw}\n                onMouseUp={stopDrawing}\n                onMouseLeave={stopDrawing}\n                onTouchStart={startDrawing}\n                onTouchMove={draw}\n                onTouchEnd={stopDrawing}\n            />\n        </div>\n    );\n};\n\nexport default PdfViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}